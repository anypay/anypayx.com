(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7482],{22096:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/developer/logs",function(){return r(5171)}])},5171:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Y}});var t=r(85893),i=r(73400),o=r(27948),a=r(96259),s=r(10901),l=r(64156),c=r(61582),d=r(72728),u=r(53184),h=r(68509),g=r(53252),f=r(26280),x=r(99226),v=r(66242),j=r(72882),p=r(7906),b=r(295),Z=r(15861),m=r(36125),w=r(30381),y=r.n(w),P=r(67294),E=r(86404);var S=r(51556),O=r(50985),_=r(50946),k=r(52664);function L(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function D(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){L(e,n,r[n])}))}return e}var N=[{id:"date",label:"Date",alignRight:!1},{id:"type",label:"Event Type",alignRight:!1},{id:"payload",label:"Event Payload",alignRight:!1},{id:""}],C={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function R(e){var n=e.order,r=e.orderBy,i=(e.rowCount,e.headLabel);return(0,t.jsx)(u.Z,{children:(0,t.jsx)(h.Z,{children:i.map((function(e){return(0,t.jsx)(g.Z,{align:e.alignRight?"right":"left",sortDirection:r===e.id&&n,children:(0,t.jsxs)(f.Z,{hideSortIcon:!0,active:r===e.id,direction:r===e.id?n:"asc",onClick:function(){console.log("sort requested")},children:[e.label,r===e.id?(0,t.jsx)(x.Z,{sx:D({},C),children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id)}))})})}function W(){var e=(0,S.Z)().events,n=(0,P.useState)("asc")[0],r=(0,P.useState)("date")[0],o=(0,P.useState)(0),a=o[0],s=o[1],l=(0,P.useState)(8),c=l[0],d=l[1],u=(0,i.Ds)().enqueueSnackbar,f=function(){var e=(0,E.E)("/account/events"),n=e.data,r=e.error,t=e.refresh,i=e.loading;return console.log("USE API",null===n||void 0===n?void 0:n.events),{entries:null===n||void 0===n?void 0:n.events,error:r,refresh:t,loading:i}}(),x=f.entries,w=f.error,L=f.loading,D=f.refresh;console.log({entries:x}),e.on("log_entry",(function(e){console.log("ON LOG ENTRY",e),D()}));var C=a>0?Math.max(0,(1+a)*c-x.length):0;return!x&&L?(0,t.jsx)(k.Z,{}):(w&&u("Error Loading Logs",{variant:"warning"}),x&&0===x.length?(0,t.jsx)("div",{children:(0,t.jsx)("h1",{children:"No Log Entires Yet"})}):x?(0,t.jsxs)(v.Z,{children:[(0,t.jsx)(_.Z,{children:(0,t.jsx)(j.Z,{sx:{minWidth:800},children:(0,t.jsxs)(p.Z,{children:[(0,t.jsx)(R,{order:n,orderBy:r,headLabel:N,rowCount:x.length}),(0,t.jsxs)(b.Z,{children:[x.slice(a*c,a*c+c).map((function(e,n){var r=y()(e.createdAt).format("MMM DD, YYYY - hh:mma"),i=JSON.stringify(e.payload);return(0,t.jsxs)(h.Z,{hover:!0,children:[(0,t.jsx)(g.Z,{align:"left",children:r}),(0,t.jsx)(g.Z,{sx:{display:"flex",alignItems:"center"},children:(0,t.jsx)(Z.Z,{variant:"subtitle2",noWrap:!0,children:e.type})}),(0,t.jsx)(g.Z,{sx:{maxWidth:400},align:"left",children:i}),(0,t.jsx)(g.Z,{align:"right",children:(0,t.jsx)(O.Z,{onSendWebhook:function(){u("manual webhook disabled",{variant:"warning"})}})})]},e.id)})),C>0&&(0,t.jsx)(h.Z,{style:{height:53*C},children:(0,t.jsx)(g.Z,{colSpan:6})})]})]})})}),(0,t.jsx)(m.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:x.length,rowsPerPage:c,page:a,onPageChange:function(e,n){return s(n)},onRowsPerPageChange:function(e){d(parseInt(e.target.value,10)),s(0)}})]}):(0,t.jsx)("div",{children:"Failed to Load Entries"}))}function Y(){var e=(0,i.Ds)().enqueueSnackbar;(0,S.Z)().events.on("authenticated",(function(n){e("Websocket Authenticated")}));var n=(0,s.Z)().themeStretch;return(0,t.jsx)(c.Z,{title:"Payments: List",children:(0,t.jsxs)(o.Z,{maxWidth:!n&&"lg",children:[(0,t.jsx)(d.Z,{heading:"Account Log Entries",links:[{name:"Dashboard",href:a.vB.root},{name:"Developer"},{name:"Account Logs"}]}),(0,t.jsx)(W,{})]})})}Y.getLayout=function(e){return(0,t.jsx)(l.Z,{children:e})}}},function(e){e.O(0,[4885,6586,9910,1631,4411,6125,3907,1993,4156,8890,9774,2888,6377],(function(){return n=22096,e(e.s=n);var n}));var n=e.O();_N_E=n}]);