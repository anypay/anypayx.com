(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4851],{15278:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/merchant/coins",function(){return t(94528)}])},68474:function(n,e,t){"use strict";t.d(e,{Z:function(){return I}});var r=t(85893),i=t(67294),a=t(30381),o=t.n(a),c=t(41664),s=t(53184),l=t(68509),d=t(53252),u=t(26280),h=t(99226),f=t(66242),p=t(72882),g=t(7906),v=t(295),x=t(87952),m=t(15861),j=t(36125),y=t(73400),Z=t(50985),b=t(50946),w=t(86404);var P=t(34051),k=t.n(P),S=t(21744);function O(n,e,t,r,i,a,o){try{var c=n[a](o),s=c.value}catch(l){return void t(l)}c.done?e(s):Promise.resolve(s).then(r,i)}function _(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function o(n){O(a,r,i,o,c,"next",n)}function c(n){O(a,r,i,o,c,"throw",n)}o(void 0)}))}}var E="https://api.anypayx.com/v1/api";function C(){return(C=_(k().mark((function n(e){return k().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",S.Z.post("".concat(E,"/webhooks/").concat(e,"/attempts")));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var D=t(51556),N=t(52664);function R(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function M(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){R(n,e,t[e])}))}return n}var L=[{id:"coin",label:"Coin",alignRight:!1},{id:"amount",label:"Amount",alignRight:!1},{id:"uid",label:"Uid",alignRight:!1},{id:"date",label:"Date",alignRight:!1},{id:""}],Y={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function A(){console.log("handle row clicked")}function W(n){var e=n.order,t=n.orderBy,i=(n.rowCount,n.headLabel);return(0,r.jsx)(s.Z,{children:(0,r.jsx)(l.Z,{onClick:A,children:i.map((function(n){return(0,r.jsx)(d.Z,{align:n.alignRight?"right":"left",sortDirection:t===n.id&&e,children:(0,r.jsxs)(u.Z,{hideSortIcon:!0,active:t===n.id,direction:t===n.id?e:"asc",onClick:function(){console.log("sort requested")},children:[n.label,t===n.id?(0,r.jsx)(h.Z,{sx:M({},Y),children:"desc"===e?"sorted descending":"sorted ascending"}):null]})},n.id)}))})})}function I(){var n=(0,D.Z)().events,e=(0,i.useState)("asc")[0],t=(0,i.useState)("date")[0],a=(0,i.useState)(0),s=a[0],u=a[1],h=(0,i.useState)(5),P=h[0],k=h[1],S=(0,y.Ds)().enqueueSnackbar,O=function(){var n=(0,w.E)("/account/payments"),e=n.data,t=n.error,r=n.refresh,i=n.loading;return console.log("USE API",null===e||void 0===e?void 0:e.payments),{payments:null===e||void 0===e?void 0:e.payments,error:t,refresh:r,loading:i}}(),_=O.payments,E=O.error,R=O.loading,M=O.refresh;n.on("payment",(function(n){console.log("ON PAYMENT",n),S("".concat(n.currency," Payment Received")),M()}));var Y=s>0?Math.max(0,(1+s)*P-_.length):0;return!_&&R?(0,r.jsx)(N.Z,{}):(E&&S("Error Loading Payments",{variant:"warning"}),_&&0===_.length?(0,r.jsx)("div",{children:(0,r.jsx)("h1",{children:"No Payments Yet"})}):_?(0,r.jsxs)(f.Z,{children:[(0,r.jsx)(b.Z,{children:(0,r.jsx)(p.Z,{sx:{minWidth:800},children:(0,r.jsxs)(g.Z,{children:[(0,r.jsx)(W,{order:e,orderBy:t,headLabel:L,rowCount:_.length}),(0,r.jsxs)(v.Z,{children:[_.slice(s*P,s*P+P).map((function(n){var e=n.currency,t=n.txid,i=n.createdAt,a=n.invoice,s=o()(i).format("MMM DD, YYYY - hh:mma");return(0,r.jsxs)(l.Z,{hover:!0,children:[(0,r.jsxs)(d.Z,{size:"small",sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(x.Z,{alt:e,src:"/icons/coins/".concat(e,".png"),sx:{mr:2}}),(0,r.jsx)(m.Z,{variant:"subtitle2",noWrap:!0,children:e})]}),(0,r.jsxs)(d.Z,{align:"left",children:[a.amount," ",a.currency]}),(0,r.jsx)(d.Z,{align:"left",children:(0,r.jsx)(c.default,{href:"/dashboard/invoices/".concat(a.uid),passHref:!0,children:(0,r.jsx)("span",{style:{color:"white",textDecoration:"underline"},children:a.uid})})}),(0,r.jsx)(d.Z,{align:"left",children:s}),(0,r.jsx)(d.Z,{align:"right",children:(0,r.jsx)(Z.Z,{invoice:a,onSendWebhook:function(){!function(n){C.apply(this,arguments)}(a.uid)}})})]},t)})),Y>0&&(0,r.jsx)(l.Z,{style:{height:53*Y},children:(0,r.jsx)(d.Z,{colSpan:6})})]})]})})}),(0,r.jsx)(j.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:_.length,rowsPerPage:P,page:s,onPageChange:function(n,e){return u(e)},onRowsPerPageChange:function(n){k(parseInt(n.target.value,10)),u(0)}})]}):(0,r.jsx)("div",{children:"Failed to Load Payments"}))}},94528:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return p}});var r=t(85893),i=t(73400),a=t(27948),o=t(96259),c=t(10901),s=t(78470),l=t(64156),d=t(61582),u=t(72728),h=t(68474),f=t(51556);function p(){(0,i.Ds)().enqueueSnackbar,(0,f.Z)().events;var n=(0,c.Z)().themeStretch,e=(0,s.Z)().user;"https://anypayx.com/app/#/pay/".concat(null===e||void 0===e?void 0:e.id);return(0,r.jsx)(d.Z,{title:"Payments: List",children:(0,r.jsxs)(a.Z,{maxWidth:!n&&"lg",children:[(0,r.jsx)(u.Z,{heading:"My Payments Received",links:[{name:"Dashboard",href:o.vB.root},{name:"Merchant"},{name:"Wallet Addresses"}]}),(0,r.jsx)(h.Z,{})]})})}p.getLayout=function(n){return(0,r.jsx)(l.Z,{children:n})}}},function(n){n.O(0,[4885,6586,9910,1631,4411,6125,3907,1993,4156,8890,9774,2888,6377],(function(){return e=15278,n(n.s=e);var e}));var e=n.O();_N_E=e}]);